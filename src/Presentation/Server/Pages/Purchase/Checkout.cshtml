@page
@model Server.Pages.CheckoutModel
@{
}
<section class="inner-page" id="checkout-page">
	<div class="container-fluid" id="page-hero">
		<div class="row">
			<div class="col-12">
				<div class="container">
					<div class="row">
						<div class="col-12 px-0">
							<h1>پیش فاکتور</h1>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<form method="post" asp-page-handler="checkout">

		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="content">
						<div class="row">
							<div class="col-12 col-lg-9">
								<!-- Choose Address -->
								<section id="choose-address">
									<div class="container">
										<div class="row">
											<div class="col-12 py-3">
												<div class="pb-1 title">آدرس تحویل سفارش</div>
												<div class="row">
													@foreach (var address in Model.Customer.Addresses)
													{

														<div class="col-12 col-md-9 pl-0" id="address-detail">
															<div class="p-3 ml-3 mb-2 mb-md-0 ml-md-0 address-to-send">
																<div class="address-title">
																	<span id="province-title">@(address.Province)</span>،
																	<span id="city-title">@(address.City)</span>،
																	<span id="address">@(address.Address)</span>،
																</div>
																<div class="row">
																	<div class="col-12 col-md-4">@($"{Resources.DataDictionary.PostalCode} : {address.PostalCode}")</div>
																</div>
															</div>
														</div>
													}

													<div class="col-12 col-md-3">
														<div class="row">
															<div class="col-6 col-md-12 pl-2 px-md-3">
																<a href="#"><div class="btn btn-light w-100">تغییر آدرس</div></a>
															</div>
															<div class="col-6 col-md-12 pr-2 px-md-3">
																<a href="#"><div class="btn btn-outline-dark mt-0 mt-md-1 w-100">افزودن آدرس جدید</div></a>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</section>
								<!-- /Choose Address -->
								<!-- Orders List -->
								<section class="mt-3" id="orders">
									<div class="container mt-2">
										<div class="row">
											<div class="col-12">
												<div class="pb-1 title">سفارشات شما</div>
												<div class="row">
													@foreach (var basketItems in Model.Basket.BasketItems)
													{
														<span class="col-6 col-sm-4 col-lg-3 px-0">
															<a asp-page="/Product" target="_blank">
																<div class="encrypt263156">
																	<div class="image" style="background-image: url(/images/products/p200.png)"></div>
																	<div class="text-center px-1 px-sm-3 pt-3">
																		<a asp-page="/Product" target="_blank"><h2>@(basketItems.ProductName)</h2></a>
																		<div class="number my-2">@($"{Resources.DataDictionary.Quantity} : {basketItems.Quantity}")</div>
																	</div>
																</div>
															</a>
														</span>
													}
												</div>
											</div>
										</div>
									</div>
								</section>
								<!-- /Orders List -->
							</div>
							<div class="col-12 col-lg-3 mt-2 mt-lg-0 pr-3 pr-lg-0">
								<div id="factor">
									<div class="container">
										<div class="row py-2">
											<div class="col-6">
												<div>جمع کل فاکتور:</div>
											</div>
											<div class="col-6">
												<div>@(Model.Basket.TotalWithoutDiscount.ToString("#,#")) تومان</div>
											</div>
										</div>
										<div class="row py-2 bg-light">
											<div class="col-6">
												<div>جمع تخفیف:</div>
											</div>
											<div class="col-6">
												<div>
													@{
														if (Model.Basket.TotalDiscountAmount == 0)
														{
															<text>0</text>
														}
														else
															Model.Basket.TotalDiscountAmount.ToString("#,#");
													}
													تومان
												</div>
											</div>
										</div>
										<div class="row py-2">
											<div class="col-6">
												<div>هزینه ارسال:</div>
											</div>
											<div class="col-6">
												<div class="small">درب منزل با مشتری</div>
											</div>
										</div>
										<div class="row py-2" id="total">
											<div class="col-6">
												<div>مبلغ قابل پرداخت:</div>
											</div>
											<div class="col-6">
												<div>@(Model.Basket.BasketTotal.ToString("#,#")) تومان</div>
											</div>
										</div>
									</div>
									<hr>
									<div class="container">
										<div class="row py-2">
											<div class="col-6">
												<div>موجودی کیف پول شما:</div>
											</div>
											<div class="col-6">
												<div>
													@{
														if (Model.WalletBalance.AvailableBalance.Amount == 0)
														{
															<text>0 تومان</text>
														}
														else
														{
															<text>@(Model.WalletBalance.AvailableBalance.Amount.ToString("#,#")) تومان</text>
														}

													}
												</div>
											</div>
										</div>
									</div>
									<div class="container">
										<div class="col-12 my-2">
											<button type="submit" class="btn btn-success w-100">پرداخت و تکمیل خرید</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
</section>